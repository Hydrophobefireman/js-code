{"version":3,"file":"j-utils.modern.js","sources":["../src/modules/util.js","../src/modules/warnings.js","../src/modules/base64ToArrayBuffer/index.js","../src/modules/Object/keys.js","../src/modules/objToCSSString/index.js","../src/modules/Object/assign.js","../src/modules/CSSStringToObj/index.js","../src/modules/es6/loose/constants.js","../src/modules/es6/loose/Map/_Symbol.js","../src/modules/es6/loose/Map/proto.js","../src/shared.js","../src/modules/es6/loose/Map/index.js","../src/modules/es6/loose/Set/_Symbol.js","../src/modules/es6/loose/Set/proto.js","../src/modules/es6/loose/Set/index.js","../src/modules/es6/loose/Weak-shared.js","../src/modules/es6/loose/WeakMap/index.js","../src/modules/es6/loose/WeakSet/index.js","../src/modules/Object/entries.js","../src/modules/Object/values.js","../src/modules/Object/fromEntries.js","../src/modules/Object/is.js","../src/modules/nextEvent/index.js","../src/modules/arrayBufferToBase64/index.js","../src/modules/Element/after.js","../src/modules/Element/append.js","../src/modules/Element/prepend.js","../src/modules/retry/index.js","../src/modules/urlencode/index.js","../src/modules/loadCSS/index.js","../index.js"],"sourcesContent":["/**\n * @returns {globalThis}\n */\nexport function patchGlobalThis() {\n  if (typeof globalThis === \"object\") return globalThis;\n  Object.defineProperty(Object.prototype, \"___this\", {\n    get: function() {\n      return this;\n    },\n    configurable: true\n  });\n  ___this.globalThis = ___this;\n  const r = ___this;\n  delete Object.prototype.___this;\n  return r;\n}\npatchGlobalThis();\nconst _Sym = globalThis.Symbol || {};\n\n/**\n *\n * @param {string|number|symbol} a\n * @param {object} b\n * @returns {boolean}\n */\nexport const has = (a, b) => a in b;\n\nexport const emptyObj = {};\nexport const emptyArr = [];\n\n/**\n *\n * @param {any} k\n */\nexport const isIterable = k => k && !!k[_Sym.iterator];\nexport const _Object = emptyObj.constructor;\nexport const hasOwnProp = emptyObj.hasOwnProperty;\n\nexport function _generateDocFrag(args) {\n  const frag = document.createDocumentFragment();\n  args.forEach(arg =>\n    frag.appendChild(\n      arg instanceof Node ? arg : document.createTextNode(String(arg))\n    )\n  );\n  return frag;\n}\nexport function checkAndPatch(o, prop, opt) {\n  if (prop in o) {\n    const val = o[prop];\n    const patch = opt.patch,\n      name = opt.name;\n    if (opt.bind) {\n      patch[name] = val.bind(opt.bind);\n    } else {\n      patch[name] = val;\n    }\n\n    return true;\n  }\n  return false;\n}\nexport const isBrowser =\n  typeof window !== \"undefined\" &&\n  ((window.navigator && !!window.navigator.userAgent) ||\n    (window.document && !!document.createElement));\n\nexport const defer =\n  typeof Promise == \"function\"\n    ? Promise.prototype.then.bind(Promise.resolve())\n    : setTimeout;\n","import { isBrowser } from \"./util.js\";\nexport const browserOnlyWarning = {\n  warn(msg) {\n    if (!isBrowser)\n      console.warn(\n        msg ||\n          \"Some functionalities only eork in browsing context. Expect errors.\"\n      );\n  },\n  _throw(msg) {\n    throw new Error(msg || \"A web browser is required for this module to run!\");\n  }\n};\n","import { browserOnlyWarning } from \"../warnings.js\";\nexport default async function base64ToArrayBuffer(b64) {\n\tbrowserOnlyWarning._throw();\n  const data = await fetch(`data:,${b64}`);\n  return await data.arrayBuffer();\n}\n","import { hasOwnProp, _Object } from \"../util.js\";\nexport default \"keys\" in _Object\n  ? _Object.keys\n  : function Object_keys(a) {\n      const arr = [];\n      for (const i in a) hasOwnProp.call(a, i) && arr.push(i);\n      return arr;\n    };\n","import keys from \"../Object/keys.js\";\nexport default function objToCSSString(a) {\n  if (\"string\" == typeof a) return a;\n  const b = [];\n  for (const c of keys(a)) b.push(`${c}:${a[c]}`);\n  return b.join(\";\");\n}\n","import { _Object,hasOwnProp } from \"../util.js\";\nexport default \"assign\" in _Object\n  ? _Object.assign\n  : function Object_assign(target) {\n      for (let i = 1; i < arguments.length; i++) {\n        const source = arguments[i];\n        for (const key in source) {\n          if (hasOwnProp.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n","import assign from \"../Object/assign.js\";\nexport default function CSSStringToObj(css) {\n  if (\"object\" == typeof css) return css;\n  const rules = css.split(\";\");\n  return rules.reduce((acc, d) => {\n    const ruleAndValue = d.split(\":\"),\n      fObj = {};\n    return 1 < ruleAndValue.length\n      ? ((fObj[ruleAndValue[0].trim()] = ruleAndValue[1].trim()),\n        assign(acc, filaObj))\n      : acc;\n  }, {});\n}\n","import { patchGlobalThis as patch, has } from \"../../util.js\";\nlet _global = patch();\nexport const HAS_MAP = has(\"Map\", _global);\nexport const HAS_SET = has(\"Set\", _global);\nexport const HAS_WEAK = has(\"WeakMap\", _global) && has(\"WeakSet\", _global);\nexport const m = \"__@@map\";\nexport const s = \"__@@set\";\nconst _isNaN = k => k !== k;\nexport const _EqCheck = (x, y) => x === y || (_isNaN(x) && _isNaN(y));\nexport const normalizeNegativeZero = k => (k === 0 ? 0 : k);\n","import {m } from \"../constants.js\";\nlet entries, values, keys;\nif (typeof Symbol !== \"undefined\") {\n  function mapEntriesIterator(map) {\n    const _ = map[m];\n    const c = _[Symbol.iterator];\n    return c.call(_);\n  }\n  entries = function entries() {\n    return mapEntriesIterator(this);\n  };\n  function mapKeyValIterator(map, isKey) {\n    const _ = map[m];\n    let i = 0;\n    const len = _.length;\n\tconst kv=isKey?0:1\n    return {\n      [Symbol.toStringTag]: \"Map Iterator\",\n      [Symbol.iterator]: function() {\n        return this\n      },\nnext: function() {\n            if (i < len) {\n              return { value: _[i++][kv], done: false };\n            }\n            return { value: void 0, done: true };\n          }\n    };\n  }\n  values = function values() {\n    return mapKeyValIterator(this, false);\n  };\n  keys = function keys() {\n    return mapKeyValIterator(this, true);\n  };\n} else {\n  entries = keys = values = function() {\n    console.warn(\"no symbol support\");\n  };\n}\nexport default { keys, values, entries };\n","import { m, _EqCheck as is, normalizeNegativeZero } from \"../constants.js\";\nimport symbolProps from \"./_Symbol.js\";\nimport assign from \"../../../Object/assign.js\";\nfunction __i_getMapArr(k) {\n  for (const i of this[m]) {\n    if (is(i[0], k)) return i;\n  }\n  return null;\n}\nexport default function setPrototypeProps(FakeMap) {\n  FakeMap.prototype.set = function set(k, v) {\n    const prevArr = __i_getMapArr.call(this, k);\n    if (prevArr) {\n      prevArr[1] = v;\n    } else {\n      this[m].push([normalizeNegativeZero(k), v]);\n    }\n    return this;\n  };\n  FakeMap.prototype.has = function has(key) {\n    return !!__i_getMapArr.call(this, key);\n  };\n  FakeMap.prototype.delete = function del(k) {\n    this[m] = this[m].filter(x => !is(x[0], k));\n  };\n  FakeMap.prototype.get = function get(key) {\n    const arr = __i_getMapArr.call(this, key);\n    return arr ? arr[1] : undefined;\n  };\n  FakeMap.prototype.forEach = function forEach(cb, that) {\n    for (const arr of this[m]) {\n      const a = arr[1],\n        b = arr[0],\n        c = this;\n      that ? cb.call(that, a, b, c) : cb(a, b, c);\n    }\n  };\n\n  FakeMap.prototype.clear = function clear() {\n    return void (this[m].length = 0);\n  };\n  Object.defineProperty(FakeMap.prototype, \"size\", {\n    enumerable: false,\n    configurable: true,\n    get: function() {\n      return this[m].length;\n    }\n  });\n  if (typeof Symbol !== \"undefined\") {\n    FakeMap.prototype[Symbol.iterator] = symbolProps.entries;\n    FakeMap.prototype[Symbol.toStringTag] = \"Map\";\n  }\n  assign(FakeMap.prototype, symbolProps);\n}\n","function _instanceof(left, right) {\n  if (\n    right != null &&\n    typeof Symbol !== \"undefined\" &&\n    right[Symbol.hasInstance]\n  ) {\n    return !!right[Symbol.hasInstance](left);\n  } else {\n    return left instanceof right;\n  }\n}\n\nexport function _classCallCheck(instance, Constructor) {\n  if (!_instanceof(instance, Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n","import { HAS_MAP, m } from \"../constants.js\";\nimport setup from \"./proto.js\";\nimport { isIterable } from \"../../../util.js\";\nimport { _classCallCheck } from \"../../../../shared.js\";\nfunction generateMap(it) {\n  if (it == null) return;\n  if (!isIterable(it))\n    throw new Error(\"value:\" + String(it) + \" is not iterable\");\n  for (k of it) {\n    if (!k || k.length !== 2) throw new Error(\"invalid arg\");\n    this.set(k[0], k[1]);\n  }\n}\nexport default function FakeMap(iterable, forceUseCustomImplementation) {\n  if (!forceUseCustomImplementation && HAS_MAP) return new Map(iterable);\n  _classCallCheck(this, FakeMap);\n  this[m] = [];\n  generateMap.call(this, iterable);\n}\nsetup(FakeMap);\n","import { s } from \"../constants.js\";\nlet entries, values, keys;\nif (typeof Symbol !== \"undefined\") {\n  function setEntriesIterator(set) {\n    const _ = set[s];\n    const c = _[Symbol.iterator];\n    return c.call(_);\n  }\n  entries = function entries() {\n    return setKeyValIterator(this, true);\n  };\n  function setKeyValIterator(set, isDup) {\n    const _ = set[s];\n    let i = 0;\n    const len = _.length;\n    return {\n      [Symbol.toStringTag]: \"Set Iterator\",\n      [Symbol.iterator]: function() {\n        return this;\n      },\n      next: function() {\n        if (i < len) {\n          const v = _[i++];\n          return { value: isDup ? [v, v] : v, done: false };\n        }\n        return { value: void 0, done: true };\n      }\n    };\n  }\n  values = function values() {\n    return setKeyValIterator(this, false);\n  };\n  keys = function keys() {\n    return setKeyValIterator(this, false);\n  };\n} else {\n  entries = keys = values = function() {\n    console.warn(\"no symbol support\");\n  };\n}\nexport default { keys, values, entries };\n","import { s, _EqCheck as is, normalizeNegativeZero } from \"../constants.js\";\nimport symbolProps from \"./_Symbol.js\";\nimport assign from \"../../../Object/assign.js\";\n\nexport default function setPrototypeProps(FakeSet) {\n  FakeSet.prototype.add = function set(k) {\n    if (!this.has(k)) this[s].push(normalizeNegativeZero(k));\n    return this;\n  };\n  FakeSet.prototype.has = function has(key) {\n    for (const i of this[s]) {\n      if (is(i, key)) return true;\n    }\n    return false;\n  };\n  FakeSet.prototype.delete = function del(k) {\n    this[s] = this[s].filter(x => !is(x, k));\n  };\n  FakeSet.prototype.forEach = function forEach(cb, that) {\n    for (const arr of this[s]) {\n      const a = arr,\n        c = this;\n      that ? cb.call(that, a, a, c) : cb(a, a, c);\n    }\n  };\n\n  FakeSet.prototype.clear = function clear() {\n    return void (this[s].length = 0);\n  };\n  Object.defineProperty(FakeSet.prototype, \"size\", {\n    enumerable: false,\n    configurable: true,\n    get: function() {\n      return this[s].length;\n    }\n  });\n  if (typeof Symbol !== \"undefined\") {\n    FakeSet.prototype[Symbol.iterator] = symbolProps.values;\n    FakeSet.prototype[Symbol.toStringTag] = \"Set\";\n  }\n  assign(FakeSet.prototype, symbolProps);\n}\n","import { HAS_SET, s } from \"../constants.js\";\nimport setup from \"./proto.js\";\nimport { isIterable } from \"../../../util.js\";\nimport { _classCallCheck } from \"../../../../shared.js\";\nfunction generateSet(it) {\n  if (it == null) return;\n  if (!isIterable(it))\n    throw new Error(\"value:\" + String(it) + \" is not iterable\");\n  for (k of it) {\n    this.add(k);\n  }\n}\nexport default function FakeSet(iterable, forceUseCustomImplementation) {\n  if (!forceUseCustomImplementation && HAS_SET) return new Set(iterable);\n  _classCallCheck(this, FakeSet);\n  this[s] = [];\n  generateSet.call(this, iterable);\n}\nsetup(FakeSet);\n","import { has, patchGlobalThis } from \"../../util.js\";\nconst gl = patchGlobalThis();\nexport function _getCryptoOrMathRandom() {\n  const hasCrypto = has(\"crypto\", gl);\n  let rv;\n  if (hasCrypto) {\n    rv = gl.crypto.getRandomValues;\n    if (rv) {\n      rv = rv.bind(crypto);\n      return rv(new Uint8Array(10)).join(\"-\");\n    }\n  }\n  return Math.random();\n}\n\nexport function initializeInternalKeyProp(obj, key) {\n  if (key in obj) return;\n  Object.defineProperty(obj, key, { value: {}, enumerable: false });\n}\n\nexport function patchObjectSealingMethods(key) {\n  /**\n   *\n   * @param {\"seal\"|\"freeze\"|\"preventExtensions\"} m\n   */\n  function _patch(m) {\n    const method = Object[m];\n    Object[m] = function FakeMethod(obj) {\n      initializeInternalKeyProp(obj, key);\n      return method(obj);\n    };\n  }\n  [\"freeze\", \"seal\", \"preventExtensions\"].forEach(_patch);\n}\n\nexport function isObjectOrThrow(i) {\n  if (Object(i) !== i) {\n    throw new Error(\"Invalid value\");\n  }\n}\n","import { HAS_WEAK } from \"../constants.js\";\nimport { isIterable } from \"../../../util.js\";\nimport {\n  _getCryptoOrMathRandom,\n  initializeInternalKeyProp,\n  patchObjectSealingMethods,\n  isObjectOrThrow\n} from \"../Weak-shared.js\";\nimport { _classCallCheck } from \"../../../../shared.js\";\nconst __WEAK__KEY =\n  \"@@WeakMap__\" +\n  +new Date() +\n  Math.random().toString(16) +\n  \"-\" +\n  _getCryptoOrMathRandom();\nfunction generateMap(it) {\n  if (it == null) return;\n  if (!isIterable(it))\n    throw new Error(\"value:\" + String(it) + \" is not iterable\");\n  for (k of it) {\n    if (!k || k.length !== 2) throw new Error(\"invalid arg\");\n    this.set(k[0], k[1]);\n  }\n}\n\nlet weakMapIds = 0;\n/**\n * this implementation holds the value in the key itself instead of holding the key as\n * a reference.\n * however, we need to patch Object.{freeze,seal,preventExtensions}\n * or WeakMaps on previously frozen objects would not work\n *\n *\n *\n * @param {Iterable} iterable\n * @param {boolean} forceUseCustomImplementation\n * @returns {WeakMap}\n */\nexport default function FakeWeakMap(iterable, forceUseCustomImplementation) {\n  if (!forceUseCustomImplementation && HAS_WEAK) return new WeakMap(iterable);\n  _classCallCheck(this, FakeWeakMap);\n  patchObjectSealingMethods(__WEAK__KEY);\n  this._id = ++weakMapIds;\n  generateMap.call(this, iterable);\n}\nfunction _getKeyValArr(key, id) {\n  const c = key[__WEAK__KEY];\n  return c ? c[id] : void 0;\n}\nfunction initSafeSetup(key) {\n  isObjectOrThrow(key);\n  initializeInternalKeyProp(key, __WEAK__KEY);\n}\nFakeWeakMap.prototype = {\n  get(key) {\n    initSafeSetup(key);\n    const val = _getKeyValArr(key, this._id);\n    if (val && val[0] === this._id) {\n      return val[1];\n    }\n  },\n  has(key) {\n    initSafeSetup(key);\n    return !!_getKeyValArr(key, this._id);\n  },\n  set(key, val) {\n    initSafeSetup(key);\n    const prevArr = _getKeyValArr(key, this._id);\n    if (prevArr && prevArr[0] === this._id) {\n      prevArr[1] = val;\n    } else {\n      key[__WEAK__KEY][this._id] = [this._id, val];\n    }\n    return this;\n  },\n  delete(key) {\n    initSafeSetup(key);\n    const prevArr = _getKeyValArr(key, this._id);\n    if (!prevArr) return false;\n    delete key[__WEAK__KEY][this._id];\n    return true;\n  }\n};\n","import _WeakMap from \"../WeakMap/index.js\";\nimport { HAS_WEAK } from \"../constants.js\";\nimport { _classCallCheck } from \"../../../../shared.js\";\n\nfunction generateSet(it) {\n  if (it == null) return;\n  if (!isIterable(it))\n    throw new Error(\"value:\" + String(it) + \" is not iterable\");\n  for (k of it) {\n    this.__map.set(k, k);\n  }\n}\n/**\n * weak set - either use native or use a weakmap (native or pollyfilled..doesnt matter)\n *\n * @returns {WeakSet}\n * @param {Iterable} iterable\n * @param {boolean} forceUseCustomImplementations\n */\nexport default function FakeWeakSet(iterable, forceUseCustomImplementations) {\n  if (!forceUseCustomImplementations && HAS_WEAK) return new WeakSet(iterable);\n  _classCallCheck(this, FakeWeakSet);\n  this.__map = new _WeakMap(null, forceUseCustomImplementations);\n  generateSet.call(this, iterable);\n}\nconst a=new FakeWeakSet()\na\nFakeWeakSet.prototype = {\n  add(k) {\n    if (this.__map.has(k)) return;\n    this.__map.set(k, k);\n    return this;\n  },\n  has(k) {\n    return this.__map.has(k);\n  },\n  delete(k) {\n    return this.__map.delete(k);\n  }\n};\n","import keys from \"./keys.js\";\nimport { _Object } from \"../util.js\";\nexport default \"entries\" in _Object\n  ? _Object.entries\n  : function Object_entries(a) {\n      const keys = keys(a);\n      let kLen = keys.length;\n      const ret = Array(kLen);\n      while (kLen--) {\n        const p = keys[kLen];\n        ret[kLen] = [p, a[p]];\n      }\n      return ret;\n    };\n","import keys from \"./keys.js\";\nimport { _Object } from \"../util.js\";\nexport default \"values\" in _Object\n  ? _Object.values\n  : function Object_values(a) {\n      const arr = [];\n      for (const i of keys(a)) arr.push(a[i]);\n      return arr;\n    };\n","import { _Object } from \"../util.js\";\n\nexport default \"fromEntries\" in _Object\n  ? _Object.fromEntries\n  : function Object_fromEntries(entries) {\n      const ret = {};\n      entries.forEach(k => (ret[k[0]] = k[1]));\n      return ret;\n    };\n","import {_Object} from \"../util.js\";\nexport default  \"is\" in _Object? _Object.is : function is(x, y) {\n  if (x === y) {\n    return x !== 0 || 1 / x === 1 / y;\n  } else {\n    return x !== x && y !== y;\n  }\n}\n","export default function nextEvent(obj, event) {\n  return new Promise(res => obj.addEventListener(event, res, { once: true }));\n}\n","import { browserOnlyWarning } from \"../warnings.js\";\nexport default function arrayBufferToBase64(buffer) {\n\tbrowserOnlyWarning._throw();\n  return new Promise((resolve, _) => {\n    const blob = new Blob([buffer], {\n      type: \"application/octet-binary\"\n    });\n    const reader = new FileReader();\n    reader.onload = evt => {\n      const dataurl = evt.target.result;\n      resolve(dataurl.substr(dataurl.indexOf(\",\") + 1));\n    };\n    reader.readAsDataURL(blob);\n  });\n}\n","import { browserOnlyWarning } from \"../warnings.js\";\nimport { _generateDocFrag } from \"../util.js\";\nexport default function Element_after(element) {\n  browserOnlyWarning._throw();\n  const args = emptyArr.slice.call(arguments, 1);\n  if (\"after\" in element) {\n    return element.after.apply(element, args);\n  }\n  const frag = _generateDocFrag(args);\n  element.parentNode.insertBefore(frag, element.nextSibling);\n}\n","import { browserOnlyWarning } from \"../warnings.js\";\nimport { _generateDocFrag } from \"../util.js\";\nexport default function Element_append(element) {\nbrowserOnlyWarning._throw();\n  const args = emptyArr.slice.call(arguments, 1);\n  if (\"append\" in element) {\n    element.append.apply(element, args);\n  }\n  const frag = _generateDocFrag(args);\n  element.appendChild(frag);\n}\n","import { browserOnlyWarning } from \"../warnings.js\";\nimport { _generateDocFrag } from \"../util.js\";\nexport default function Element_prepend(element) {\n  browserOnlyWarning._throw();\n  const args = emptyArr.slice.call(arguments, 1);\n  if (\"prepend\" in element) {\n    return element.prepend.apply(element, args);\n  }\n  const frag = _generateDocFrag(args);\n  element.insertBefore(frag, element.firstChild);\n}\n","export default function retry(fn, max,bind) {\n\tmax=max||3\n  return async function() {\n    let tries = 0;\n    while (tries < max) {\n      try {\n        return await fn.apply(bind,arguments);\n      } catch (e) {\n        tries++;\n      }\n    }\n    throw new Error(\"function \" + (fn.name || \"\") + \" failed \" + max + \" times\");\n  };\n}\n","import { patchGlobalThis } from \"../util.js\";\nimport keys from \"../Object/keys.js\";\npatchGlobalThis();\nexport default function urlencode(a) {\n  if (globalThis.URLSearchParams) {\n    return new URLSearchParams(a).toString();\n  } else {\n    return `${obj\n      .keys(a)\n      .map(b => `${encodeURIComponent(b)}=${encodeURIComponent(a[b])}`)\n      .join(\"&\")}`;\n  }\n}\n","import { browserOnlyWarning } from \"../warnings.js\";\nimport assign from \"../Object/assign.js\";\nimport append from \"../Element/append.js\";\nexport default function loadCSS(url) {\n  browserOnlyWarning._throw();\n  const link = assign(document.createElement(\"link\"), {\n    rel: \"stylesheet\",\n    href: url\n  });\n  return new Promise((res, rej) => {\n    link.addEventListener(\"load\", () => res());\n    link.addEventListener(\"error\", () => rej());\n    append(document.head, link);\n  });\n}\n","import base64ToArrayBuffer from \"./src/modules/base64ToArrayBuffer/index.js\";\nimport objToCSSString from \"./src/modules/objToCSSString/index.js\";\nimport CSSStringToObj from \"./src/modules/CSSStringToObj/index.js\";\nimport {\n  FakeMap,\n  FakeSet,\n  FakeWeakMap,\n  FakeWeakSet\n} from \"./src/modules/es6/loose/index.js\";\nimport {\n  Object_keys,\n  Object_values,\n  Object_entries,\n  Object_fromEntries,\n  Object_assign,\n  Object_is\n} from \"./src/modules/Object/index.js\";\nimport nextEvent from \"./src/modules/nextEvent/index.js\";\nimport arrayBufferToBase64 from \"./src/modules/arrayBufferToBase64/index.js\";\nimport {\n  Element_append,\n  Element_prepend,\n  Element_after\n} from \"./src/modules/Element/index.js\";\nimport retry from \"./src/modules/retry/index.js\";\nimport urlencode from \"./src/modules/urlencode/index.js\";\nimport loadCSS from \"./src/modules/loadCSS/index.js\";\nconst obj = {\n  arrayBufferToBase64,\n  base64ToArrayBuffer,\n  objToCSSString,\n  Object_is,\n  CSSStringToObj,\n  urlencode,\n  Object_keys,\n  Object_values,\n  Object_entries,\n  Object_fromEntries,\n  Object_assign,\n  Element_append,\n  Element_prepend,\n  Element_after,\n  loadCSS,\n  retry,\n  nextEvent,\n  compatMap: FakeMap,\n  compatSet: FakeSet,\n  compatWeakMap: FakeWeakMap,\n  compatWeakSet: FakeWeakSet};\n\nexport default obj;\n"],"names":["patchGlobalThis","globalThis","Object","defineProperty","prototype","get","configurable","___this","r","_Sym","Symbol","has","a","b","emptyObj","isIterable","k","iterator","_Object","constructor","hasOwnProp","hasOwnProperty","_generateDocFrag","args","frag","document","createDocumentFragment","forEach","arg","appendChild","Node","createTextNode","String","isBrowser","window","navigator","userAgent","createElement","defer","Promise","then","bind","resolve","setTimeout","browserOnlyWarning","warn","msg","console","_throw","Error","base64ToArrayBuffer","b64","data","fetch","arrayBuffer","keys","Object_keys","arr","i","call","push","objToCSSString","c","join","assign","Object_assign","target","arguments","length","source","key","CSSStringToObj","css","rules","split","reduce","acc","d","ruleAndValue","fObj","trim","filaObj","_global","patch","HAS_MAP","HAS_SET","HAS_WEAK","m","s","_isNaN","_EqCheck","x","y","normalizeNegativeZero","entries","values","mapEntriesIterator","map","_","mapKeyValIterator","isKey","len","kv","toStringTag","next","value","done","__i_getMapArr","is","setPrototypeProps","FakeMap","set","v","prevArr","delete","del","filter","undefined","cb","that","clear","enumerable","symbolProps","_instanceof","left","right","hasInstance","_classCallCheck","instance","Constructor","TypeError","generateMap","it","iterable","forceUseCustomImplementation","Map","setup","setKeyValIterator","isDup","FakeSet","add","generateSet","Set","gl","_getCryptoOrMathRandom","hasCrypto","rv","crypto","getRandomValues","Uint8Array","Math","random","initializeInternalKeyProp","obj","patchObjectSealingMethods","_patch","method","FakeMethod","isObjectOrThrow","__WEAK__KEY","Date","toString","weakMapIds","FakeWeakMap","WeakMap","_id","_getKeyValArr","id","initSafeSetup","val","__map","FakeWeakSet","forceUseCustomImplementations","WeakSet","_WeakMap","Object_entries","kLen","ret","Array","p","Object_values","fromEntries","Object_fromEntries","nextEvent","event","res","addEventListener","once","arrayBufferToBase64","buffer","blob","Blob","type","reader","FileReader","onload","evt","dataurl","result","substr","indexOf","readAsDataURL","Element_after","element","emptyArr","slice","after","apply","parentNode","insertBefore","nextSibling","Element_append","append","Element_prepend","prepend","firstChild","retry","fn","max","tries","e","name","urlencode","URLSearchParams","encodeURIComponent","loadCSS","url","link","rel","href","rej","head","Object_is","compatMap","compatSet","compatWeakMap","compatWeakSet"],"mappings":"AAGO,SAASA,eAAT,GAA2B;MAC5B,OAAOC,UAAP,KAAsB,QAA1B,EAAoC,OAAOA,UAAP;EACpCC,MAAM,CAACC,cAAP,CAAsBD,MAAM,CAACE,SAA7B,EAAwC,SAAxC,EAAmD;IACjDC,GAAG,EAAE,eAAW;aACP,IAAP;KAF+C;IAIjDC,YAAY,EAAE;GAJhB;EAMAC,OAAO,CAACN,UAAR,GAAqBM,OAArB;MACMC,CAAC,GAAGD,OAAV;SACOL,MAAM,CAACE,SAAP,CAAiBG,OAAxB;SACOC,CAAP;;AAEFR,eAAe;;AACf,IAAMS,IAAI,GAAGR,UAAU,CAACS,MAAX,IAAqB,EAAlC;;AAQA,AAAO,IAAMC,GAAG,GAAG,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,IAAIC,CAA3B;AAEP,AAAO,IAAMC,QAAQ,GAAG,EAAjB;AACP,AAMO,IAAMC,YAAU,GAAGC,CAAC,IAAIA,CAAC,IAAI,CAAC,CAACA,CAAC,CAACP,IAAI,CAACQ,QAAN,CAAhC;AACP,AAAO,IAAMC,OAAO,GAAGJ,QAAQ,CAACK,WAAzB;AACP,AAAO,IAAMC,UAAU,GAAGN,QAAQ,CAACO,cAA5B;AAEP,AAAO,SAASC,gBAAT,CAA0BC,IAA1B,EAAgC;MAC/BC,IAAI,GAAGC,QAAQ,CAACC,sBAAT,EAAb;EACAH,IAAI,CAACI,OAAL,CAAaC,GAAG,IACdJ,IAAI,CAACK,WAAL,CACED,GAAG,YAAYE,IAAf,GAAsBF,GAAtB,GAA4BH,QAAQ,CAACM,cAAT,CAAwBC,MAAM,CAACJ,GAAD,CAA9B,CAD9B,CADF;SAKOJ,IAAP;;AAEF,AAeO,IAAMS,SAAS,GACpB,OAAOC,MAAP,KAAkB,WAAlB,KACEA,MAAM,CAACC,SAAP,IAAoB,CAAC,CAACD,MAAM,CAACC,SAAP,CAAiBC,SAAxC,IACEF,MAAM,CAACT,QAAP,IAAmB,CAAC,CAACA,QAAQ,CAACY,aAFjC,CADK;AAKP,AAAO,IAAMC,KAAK,GAChB,OAAOC,OAAP,IAAkB,UAAlB,GACIA,OAAO,CAACnC,SAAR,CAAkBoC,IAAlB,CAAuBC,IAAvB,CAA4BF,OAAO,CAACG,OAAR,EAA5B,CADJ,GAEIC,UAHC;;AClEA,IAAMC,kBAAkB,GAAG;EAChCC,IAAI,CAACC,GAAD,EAAM;QACJ,CAACb,SAAL,EACEc,OAAO,CAACF,IAAR,CACEC,GAAG,IACD,oEAFJ;GAH4B;;EAQhCE,MAAM,CAACF,GAAD,EAAM;UACJ,IAAIG,KAAJ,CAAUH,GAAG,IAAI,mDAAjB,CAAN;;;CATG;;ACAQ,eAAeI,mBAAf,CAAmCC,GAAnC,EAAwC;EACtDP,kBAAkB,CAACI,MAAnB;;MACOI,IAAI,GAAG,MAAMC,KAAK,YAAUF,GAAV,CAAxB;SACO,MAAMC,IAAI,CAACE,WAAL,EAAb;;;ACHF,kBAAe,UAAUpC,OAAV,GACXA,OAAO,CAACqC,IADG,GAEX,SAASC,WAAT,CAAqB5C,CAArB,EAAwB;MAChB6C,GAAG,GAAG,EAAZ;;OACK,IAAMC,CAAX,IAAgB9C,CAAhB;IAAmBQ,UAAU,CAACuC,IAAX,CAAgB/C,CAAhB,EAAmB8C,CAAnB,KAAyBD,GAAG,CAACG,IAAJ,CAASF,CAAT,CAAzB;;;SACZD,GAAP;CALN;;ACAe,SAASI,cAAT,CAAwBjD,CAAxB,EAA2B;MACpC,YAAY,OAAOA,CAAvB,EAA0B,OAAOA,CAAP;MACpBC,CAAC,GAAG,EAAV;;OACK,IAAMiD,CAAX,IAAgBP,WAAI,CAAC3C,CAAD,CAApB;IAAyBC,CAAC,CAAC+C,IAAF,CAAUE,CAAV,SAAelD,CAAC,CAACkD,CAAD,CAAhB;;;SAClBjD,CAAC,CAACkD,IAAF,CAAO,GAAP,CAAP;;;ACJF,oBAAe,YAAY7C,OAAZ,GACXA,OAAO,CAAC8C,MADG,GAEX,SAASC,aAAT,CAAuBC,MAAvB,EAA+B;OACxB,IAAIR,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGS,SAAS,CAACC,MAA9B,EAAsCV,CAAC,EAAvC,EAA2C;QACnCW,MAAM,GAAGF,SAAS,CAACT,CAAD,CAAxB;;SACK,IAAMY,GAAX,IAAkBD,MAAlB,EAA0B;UACpBjD,UAAU,CAACuC,IAAX,CAAgBU,MAAhB,EAAwBC,GAAxB,CAAJ,EAAkC;QAChCJ,MAAM,CAACI,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;;;;;SAICJ,MAAP;CAXN;;ACAe,SAASK,cAAT,CAAwBC,GAAxB,EAA6B;MACtC,YAAY,OAAOA,GAAvB,EAA4B,OAAOA,GAAP;MACtBC,KAAK,GAAGD,GAAG,CAACE,KAAJ,CAAU,GAAV,CAAd;SACOD,KAAK,CAACE,MAAN,CAAa,CAACC,GAAD,EAAMC,CAAN,KAAY;QACxBC,YAAY,GAAGD,CAAC,CAACH,KAAF,CAAQ,GAAR,CAArB;QACEK,IAAI,GAAG,EADT;WAEO,IAAID,YAAY,CAACV,MAAjB,IACDW,IAAI,CAACD,YAAY,CAAC,CAAD,CAAZ,CAAgBE,IAAhB,EAAD,CAAJ,GAA+BF,YAAY,CAAC,CAAD,CAAZ,CAAgBE,IAAhB,EAAhC,EACDhB,aAAM,CAACY,GAAD,EAAMK,OAAN,CAFH,IAGHL,GAHJ;GAHK,EAOJ,EAPI,CAAP;;;ACHF,IAAIM,OAAO,GAAGC,eAAK,EAAnB;;AACA,AAAO,IAAMC,OAAO,GAAGzE,GAAG,CAAC,KAAD,EAAQuE,OAAR,CAAnB;AACP,AAAO,IAAMG,OAAO,GAAG1E,GAAG,CAAC,KAAD,EAAQuE,OAAR,CAAnB;AACP,AAAO,IAAMI,QAAQ,GAAG3E,GAAG,CAAC,SAAD,EAAYuE,OAAZ,CAAH,IAA2BvE,GAAG,CAAC,SAAD,EAAYuE,OAAZ,CAA/C;AACP,AAAO,IAAMK,CAAC,GAAG,SAAV;AACP,AAAO,IAAMC,CAAC,GAAG,SAAV;;AACP,IAAMC,MAAM,GAAGzE,CAAC,IAAIA,CAAC,KAAKA,CAA1B;;AACA,AAAO,IAAM0E,QAAQ,GAAG,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,KAAKC,CAAN,IAAYH,MAAM,CAACE,CAAD,CAAN,IAAaF,MAAM,CAACG,CAAD,CAA1D;AACP,AAAO,IAAMC,qBAAqB,GAAG7E,CAAC,IAAKA,CAAC,KAAK,CAAN,GAAU,CAAV,GAAcA,CAAlD;;ACRP,IAAI8E,OAAJ,EAAaC,MAAb,EAAqBxC,IAArB;;AACA,IAAI,OAAO7C,MAAP,KAAkB,WAAtB,EAAmC;WACxBsF,kBAAT,CAA4BC,GAA5B,EAAiC;QACzBC,CAAC,GAAGD,GAAG,CAACV,CAAD,CAAb;QACMzB,CAAC,GAAGoC,CAAC,CAACxF,MAAM,CAACO,QAAR,CAAX;WACO6C,CAAC,CAACH,IAAF,CAAOuC,CAAP,CAAP;;;EAEFJ,OAAO,GAAG,SAASA,OAAT,GAAmB;WACpBE,kBAAkB,CAAC,IAAD,CAAzB;GADF;;WAGSG,iBAAT,CAA2BF,GAA3B,EAAgCG,KAAhC,EAAuC;QAC/BF,CAAC,GAAGD,GAAG,CAACV,CAAD,CAAb;QACI7B,CAAC,GAAG,CAAR;QACM2C,GAAG,GAAGH,CAAC,CAAC9B,MAAd;QACGkC,EAAE,GAACF,KAAK,GAAC,CAAD,GAAG,CAAjB;WACU;OACJ1F,MAAM,CAAC6F,WAAR,GAAsB,cADjB;OAEJ7F,MAAM,CAACO,QAAR,GAAmB,YAAW;eACrB,IAAP;OAHG;MAKXuF,IAAI,EAAE,gBAAW;YACD9C,CAAC,GAAG2C,GAAR,EAAa;iBACJ;YAAEI,KAAK,EAAEP,CAAC,CAACxC,CAAC,EAAF,CAAD,CAAO4C,EAAP,CAAT;YAAqBI,IAAI,EAAE;WAAlC;;;eAEK;UAAED,KAAK,EAAE,KAAK,CAAd;UAAiBC,IAAI,EAAE;SAA9B;;KATR;;;EAaFX,MAAM,GAAG,SAASA,MAAT,GAAkB;WAClBI,iBAAiB,CAAC,IAAD,EAAO,KAAP,CAAxB;GADF;;EAGA5C,IAAI,GAAG,SAASA,IAAT,GAAgB;WACd4C,iBAAiB,CAAC,IAAD,EAAO,IAAP,CAAxB;GADF;CA9BF,MAiCO;EACLL,OAAO,GAAGvC,IAAI,GAAGwC,MAAM,GAAG,kBAAW;IACnChD,OAAO,CAACF,IAAR,CAAa,mBAAb;GADF;;;AAIF,kBAAe;EAAEU,IAAF;EAAQwC,MAAR;EAAgBD;CAA/B;;ACrCA,SAASa,aAAT,CAAuB3F,CAAvB,EAA0B;OACnB,IAAM0C,CAAX,IAAgB,KAAK6B,CAAL,CAAhB,EAAyB;QACnBqB,QAAE,CAAClD,CAAC,CAAC,CAAD,CAAF,EAAO1C,CAAP,CAAN,EAAiB,OAAO0C,CAAP;;;SAEZ,IAAP;;;AAEF,AAAe,SAASmD,iBAAT,CAA2BC,OAA3B,EAAoC;EACjDA,OAAO,CAAC1G,SAAR,CAAkB2G,GAAlB,GAAwB,SAASA,GAAT,CAAa/F,CAAb,EAAgBgG,CAAhB,EAAmB;QACnCC,OAAO,GAAGN,aAAa,CAAChD,IAAd,CAAmB,IAAnB,EAAyB3C,CAAzB,CAAhB;;QACIiG,OAAJ,EAAa;MACXA,OAAO,CAAC,CAAD,CAAP,GAAaD,CAAb;KADF,MAEO;WACAzB,CAAL,EAAQ3B,IAAR,CAAa,CAACiC,qBAAqB,CAAC7E,CAAD,CAAtB,EAA2BgG,CAA3B,CAAb;;;WAEK,IAAP;GAPF;;EASAF,OAAO,CAAC1G,SAAR,CAAkBO,GAAlB,GAAwB,SAASA,GAAT,CAAa2D,GAAb,EAAkB;WACjC,CAAC,CAACqC,aAAa,CAAChD,IAAd,CAAmB,IAAnB,EAAyBW,GAAzB,CAAT;GADF;;EAGAwC,OAAO,CAAC1G,SAAR,CAAkB8G,MAAlB,GAA2B,SAASC,GAAT,CAAanG,CAAb,EAAgB;SACpCuE,CAAL,IAAU,KAAKA,CAAL,EAAQ6B,MAAR,CAAezB,CAAC,IAAI,CAACiB,QAAE,CAACjB,CAAC,CAAC,CAAD,CAAF,EAAO3E,CAAP,CAAvB,CAAV;GADF;;EAGA8F,OAAO,CAAC1G,SAAR,CAAkBC,GAAlB,GAAwB,SAASA,GAAT,CAAaiE,GAAb,EAAkB;QAClCb,GAAG,GAAGkD,aAAa,CAAChD,IAAd,CAAmB,IAAnB,EAAyBW,GAAzB,CAAZ;;WACOb,GAAG,GAAGA,GAAG,CAAC,CAAD,CAAN,GAAY4D,SAAtB;GAFF;;EAIAP,OAAO,CAAC1G,SAAR,CAAkBuB,OAAlB,GAA4B,SAASA,OAAT,CAAiB2F,EAAjB,EAAqBC,IAArB,EAA2B;SAChD,IAAM9D,GAAX,IAAkB,KAAK8B,CAAL,CAAlB,EAA2B;UACnB3E,CAAC,GAAG6C,GAAG,CAAC,CAAD,CAAb;UACE5C,CAAC,GAAG4C,GAAG,CAAC,CAAD,CADT;UAEEK,CAAC,GAAG,IAFN;MAGAyD,IAAI,GAAGD,EAAE,CAAC3D,IAAH,CAAQ4D,IAAR,EAAc3G,CAAd,EAAiBC,CAAjB,EAAoBiD,CAApB,CAAH,GAA4BwD,EAAE,CAAC1G,CAAD,EAAIC,CAAJ,EAAOiD,CAAP,CAAlC;;GALJ;;EASAgD,OAAO,CAAC1G,SAAR,CAAkBoH,KAAlB,GAA0B,SAASA,KAAT,GAAiB;WAClC,MAAM,KAAKjC,CAAL,EAAQnB,MAAR,GAAiB,CAAvB,CAAP;GADF;;EAGAlE,MAAM,CAACC,cAAP,CAAsB2G,OAAO,CAAC1G,SAA9B,EAAyC,MAAzC,EAAiD;IAC/CqH,UAAU,EAAE,KADmC;IAE/CnH,YAAY,EAAE,IAFiC;IAG/CD,GAAG,EAAE,eAAW;aACP,KAAKkF,CAAL,EAAQnB,MAAf;;GAJJ;;MAOI,OAAO1D,MAAP,KAAkB,WAAtB,EAAmC;IACjCoG,OAAO,CAAC1G,SAAR,CAAkBM,MAAM,CAACO,QAAzB,IAAqCyG,WAAW,CAAC5B,OAAjD;IACAgB,OAAO,CAAC1G,SAAR,CAAkBM,MAAM,CAAC6F,WAAzB,IAAwC,KAAxC;;;EAEFvC,aAAM,CAAC8C,OAAO,CAAC1G,SAAT,EAAoBsH,WAApB,CAAN;;;ACpDF,SAASC,WAAT,CAAqBC,IAArB,EAA2BC,KAA3B,EAAkC;MAE9BA,KAAK,IAAI,IAAT,IACA,OAAOnH,MAAP,KAAkB,WADlB,IAEAmH,KAAK,CAACnH,MAAM,CAACoH,WAAR,CAHP,EAIE;WACO,CAAC,CAACD,KAAK,CAACnH,MAAM,CAACoH,WAAR,CAAL,CAA0BF,IAA1B,CAAT;GALF,MAMO;WACEA,IAAI,YAAYC,KAAvB;;;;AAIJ,AAAO,SAASE,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;MACjD,CAACN,WAAW,CAACK,QAAD,EAAWC,WAAX,CAAhB,EAAyC;UACjC,IAAIC,SAAJ,CAAc,mCAAd,CAAN;;;;ACVJ,SAASC,WAAT,CAAqBC,EAArB,EAAyB;MACnBA,EAAE,IAAI,IAAV,EAAgB;MACZ,CAACrH,YAAU,CAACqH,EAAD,CAAf,EACE,MAAM,IAAInF,KAAJ,CAAU,WAAWjB,MAAM,CAACoG,EAAD,CAAjB,GAAwB,kBAAlC,CAAN;;OACGpH,CAAL,IAAUoH,EAAV,EAAc;QACR,CAACpH,CAAD,IAAMA,CAAC,CAACoD,MAAF,KAAa,CAAvB,EAA0B,MAAM,IAAInB,KAAJ,CAAU,aAAV,CAAN;SACrB8D,GAAL,CAAS/F,CAAC,CAAC,CAAD,CAAV,EAAeA,CAAC,CAAC,CAAD,CAAhB;;;;AAGJ,AAAe,SAAS8F,OAAT,CAAiBuB,QAAjB,EAA2BC,4BAA3B,EAAyD;MAClE,CAACA,4BAAD,IAAiClD,OAArC,EAA8C,OAAO,IAAImD,GAAJ,CAAQF,QAAR,CAAP;;EAC9CN,eAAe,CAAC,IAAD,EAAOjB,OAAP,CAAf;;OACKvB,CAAL,IAAU,EAAV;EACA4C,WAAW,CAACxE,IAAZ,CAAiB,IAAjB,EAAuB0E,QAAvB;;AAEFG,iBAAK,CAAC1B,OAAD,CAAL;;AClBA,IAAIhB,SAAJ,EAAaC,QAAb,EAAqBxC,MAArB;;AACA,IAAI,OAAO7C,MAAP,KAAkB,WAAtB,EAAmC;AACjC;EAKAoF,SAAO,GAAG,SAASA,OAAT,GAAmB;WACpB2C,iBAAiB,CAAC,IAAD,EAAO,IAAP,CAAxB;GADF;;WAGSA,iBAAT,CAA2B1B,GAA3B,EAAgC2B,KAAhC,EAAuC;QAC/BxC,CAAC,GAAGa,GAAG,CAACvB,CAAD,CAAb;QACI9B,CAAC,GAAG,CAAR;QACM2C,GAAG,GAAGH,CAAC,CAAC9B,MAAd;WACO;OACJ1D,MAAM,CAAC6F,WAAR,GAAsB,cADjB;OAEJ7F,MAAM,CAACO,QAAR,GAAmB,YAAW;eACrB,IAAP;OAHG;MAKLuF,IAAI,EAAE,gBAAW;YACX9C,CAAC,GAAG2C,GAAR,EAAa;cACLW,CAAC,GAAGd,CAAC,CAACxC,CAAC,EAAF,CAAX;iBACO;YAAE+C,KAAK,EAAEiC,KAAK,GAAG,CAAC1B,CAAD,EAAIA,CAAJ,CAAH,GAAYA,CAA1B;YAA6BN,IAAI,EAAE;WAA1C;;;eAEK;UAAED,KAAK,EAAE,KAAK,CAAd;UAAiBC,IAAI,EAAE;SAA9B;;KAVJ;;;EAcFX,QAAM,GAAG,SAASA,MAAT,GAAkB;WAClB0C,iBAAiB,CAAC,IAAD,EAAO,KAAP,CAAxB;GADF;;EAGAlF,MAAI,GAAG,SAASA,IAAT,GAAgB;WACdkF,iBAAiB,CAAC,IAAD,EAAO,KAAP,CAAxB;GADF;CA9BF,MAiCO;EACL3C,SAAO,GAAGvC,MAAI,GAAGwC,QAAM,GAAG,kBAAW;IACnChD,OAAO,CAACF,IAAR,CAAa,mBAAb;GADF;;;AAIF,oBAAe;QAAEU,MAAF;UAAQwC,QAAR;WAAgBD;CAA/B;;ACpCe,SAASe,mBAAT,CAA2B8B,OAA3B,EAAoC;EACjDA,OAAO,CAACvI,SAAR,CAAkBwI,GAAlB,GAAwB,SAAS7B,GAAT,CAAa/F,CAAb,EAAgB;QAClC,CAAC,KAAKL,GAAL,CAASK,CAAT,CAAL,EAAkB,KAAKwE,CAAL,EAAQ5B,IAAR,CAAaiC,qBAAqB,CAAC7E,CAAD,CAAlC;WACX,IAAP;GAFF;;EAIA2H,OAAO,CAACvI,SAAR,CAAkBO,GAAlB,GAAwB,SAASA,GAAT,CAAa2D,GAAb,EAAkB;SACnC,IAAMZ,CAAX,IAAgB,KAAK8B,CAAL,CAAhB,EAAyB;UACnBoB,QAAE,CAAClD,CAAD,EAAIY,GAAJ,CAAN,EAAgB,OAAO,IAAP;;;WAEX,KAAP;GAJF;;EAMAqE,OAAO,CAACvI,SAAR,CAAkB8G,MAAlB,GAA2B,SAASC,GAAT,CAAanG,CAAb,EAAgB;SACpCwE,CAAL,IAAU,KAAKA,CAAL,EAAQ4B,MAAR,CAAezB,CAAC,IAAI,CAACiB,QAAE,CAACjB,CAAD,EAAI3E,CAAJ,CAAvB,CAAV;GADF;;EAGA2H,OAAO,CAACvI,SAAR,CAAkBuB,OAAlB,GAA4B,SAASA,OAAT,CAAiB2F,EAAjB,EAAqBC,IAArB,EAA2B;SAChD,IAAM9D,GAAX,IAAkB,KAAK+B,CAAL,CAAlB,EAA2B;UACnB5E,CAAC,GAAG6C,GAAV;UACEK,CAAC,GAAG,IADN;MAEAyD,IAAI,GAAGD,EAAE,CAAC3D,IAAH,CAAQ4D,IAAR,EAAc3G,CAAd,EAAiBA,CAAjB,EAAoBkD,CAApB,CAAH,GAA4BwD,EAAE,CAAC1G,CAAD,EAAIA,CAAJ,EAAOkD,CAAP,CAAlC;;GAJJ;;EAQA6E,OAAO,CAACvI,SAAR,CAAkBoH,KAAlB,GAA0B,SAASA,KAAT,GAAiB;WAClC,MAAM,KAAKhC,CAAL,EAAQpB,MAAR,GAAiB,CAAvB,CAAP;GADF;;EAGAlE,MAAM,CAACC,cAAP,CAAsBwI,OAAO,CAACvI,SAA9B,EAAyC,MAAzC,EAAiD;IAC/CqH,UAAU,EAAE,KADmC;IAE/CnH,YAAY,EAAE,IAFiC;IAG/CD,GAAG,EAAE,eAAW;aACP,KAAKmF,CAAL,EAAQpB,MAAf;;GAJJ;;MAOI,OAAO1D,MAAP,KAAkB,WAAtB,EAAmC;IACjCiI,OAAO,CAACvI,SAAR,CAAkBM,MAAM,CAACO,QAAzB,IAAqCyG,aAAW,CAAC3B,MAAjD;IACA4C,OAAO,CAACvI,SAAR,CAAkBM,MAAM,CAAC6F,WAAzB,IAAwC,KAAxC;;;EAEFvC,aAAM,CAAC2E,OAAO,CAACvI,SAAT,EAAoBsH,aAApB,CAAN;;;ACpCF,SAASmB,WAAT,CAAqBT,EAArB,EAAyB;MACnBA,EAAE,IAAI,IAAV,EAAgB;MACZ,CAACrH,YAAU,CAACqH,EAAD,CAAf,EACE,MAAM,IAAInF,KAAJ,CAAU,WAAWjB,MAAM,CAACoG,EAAD,CAAjB,GAAwB,kBAAlC,CAAN;;OACGpH,CAAL,IAAUoH,EAAV,EAAc;SACPQ,GAAL,CAAS5H,CAAT;;;;AAGJ,AAAe,SAAS2H,OAAT,CAAiBN,QAAjB,EAA2BC,4BAA3B,EAAyD;MAClE,CAACA,4BAAD,IAAiCjD,OAArC,EAA8C,OAAO,IAAIyD,GAAJ,CAAQT,QAAR,CAAP;;EAC9CN,eAAe,CAAC,IAAD,EAAOY,OAAP,CAAf;;OACKnD,CAAL,IAAU,EAAV;EACAqD,WAAW,CAAClF,IAAZ,CAAiB,IAAjB,EAAuB0E,QAAvB;;AAEFG,mBAAK,CAACG,OAAD,CAAL;;ACjBA,IAAMI,EAAE,GAAG/I,eAAe,EAA1B;AACA,AAAO,SAASgJ,sBAAT,GAAkC;MACjCC,SAAS,GAAGtI,GAAG,CAAC,QAAD,EAAWoI,EAAX,CAArB;MACIG,EAAJ;;MACID,SAAJ,EAAe;IACbC,EAAE,GAAGH,EAAE,CAACI,MAAH,CAAUC,eAAf;;QACIF,EAAJ,EAAQ;MACNA,EAAE,GAAGA,EAAE,CAACzG,IAAH,CAAQ0G,MAAR,CAAL;aACOD,EAAE,CAAC,IAAIG,UAAJ,CAAe,EAAf,CAAD,CAAF,CAAuBtF,IAAvB,CAA4B,GAA5B,CAAP;;;;SAGGuF,IAAI,CAACC,MAAL,EAAP;;AAGF,AAAO,SAASC,yBAAT,CAAmCC,GAAnC,EAAwCnF,GAAxC,EAA6C;MAC9CA,GAAG,IAAImF,GAAX,EAAgB;EAChBvJ,MAAM,CAACC,cAAP,CAAsBsJ,GAAtB,EAA2BnF,GAA3B,EAAgC;IAAEmC,KAAK,EAAE,EAAT;IAAagB,UAAU,EAAE;GAAzD;;AAGF,AAAO,SAASiC,yBAAT,CAAmCpF,GAAnC,EAAwC;WAKpCqF,MAAT,CAAgBpE,CAAhB,EAAmB;QACXqE,MAAM,GAAG1J,MAAM,CAACqF,CAAD,CAArB;;IACArF,MAAM,CAACqF,CAAD,CAAN,GAAY,SAASsE,UAAT,CAAoBJ,GAApB,EAAyB;MACnCD,yBAAyB,CAACC,GAAD,EAAMnF,GAAN,CAAzB;aACOsF,MAAM,CAACH,GAAD,CAAb;KAFF;;;GAKD,QAAD,EAAW,MAAX,EAAmB,mBAAnB,EAAwC9H,OAAxC,CAAgDgI,MAAhD;;AAGF,AAAO,SAASG,eAAT,CAAyBpG,CAAzB,EAA4B;MAC7BxD,MAAM,CAACwD,CAAD,CAAN,KAAcA,CAAlB,EAAqB;UACb,IAAIT,KAAJ,CAAU,eAAV,CAAN;;;;AC5BJ,IAAM8G,WAAW,GACf,gBACA,CAAC,IAAIC,IAAJ,EADD,GAEAV,IAAI,CAACC,MAAL,GAAcU,QAAd,CAAuB,EAAvB,CAFA,GAGA,GAHA,GAIAjB,sBAAsB,EALxB;;AAMA,SAASb,aAAT,CAAqBC,EAArB,EAAyB;MACnBA,EAAE,IAAI,IAAV,EAAgB;MACZ,CAACrH,YAAU,CAACqH,EAAD,CAAf,EACE,MAAM,IAAInF,KAAJ,CAAU,WAAWjB,MAAM,CAACoG,EAAD,CAAjB,GAAwB,kBAAlC,CAAN;;OACGpH,CAAL,IAAUoH,EAAV,EAAc;QACR,CAACpH,CAAD,IAAMA,CAAC,CAACoD,MAAF,KAAa,CAAvB,EAA0B,MAAM,IAAInB,KAAJ,CAAU,aAAV,CAAN;SACrB8D,GAAL,CAAS/F,CAAC,CAAC,CAAD,CAAV,EAAeA,CAAC,CAAC,CAAD,CAAhB;;;;AAIJ,IAAIkJ,UAAU,GAAG,CAAjB;AAaA,AAAe,SAASC,WAAT,CAAqB9B,QAArB,EAA+BC,4BAA/B,EAA6D;MACtE,CAACA,4BAAD,IAAiChD,QAArC,EAA+C,OAAO,IAAI8E,OAAJ,CAAY/B,QAAZ,CAAP;;EAC/CN,eAAe,CAAC,IAAD,EAAOoC,WAAP,CAAf;;EACAT,yBAAyB,CAACK,WAAD,CAAzB;OACKM,GAAL,GAAW,EAAEH,UAAb;EACA/B,aAAW,CAACxE,IAAZ,CAAiB,IAAjB,EAAuB0E,QAAvB;;;AAEF,SAASiC,aAAT,CAAuBhG,GAAvB,EAA4BiG,EAA5B,EAAgC;MACxBzG,CAAC,GAAGQ,GAAG,CAACyF,WAAD,CAAb;SACOjG,CAAC,GAAGA,CAAC,CAACyG,EAAD,CAAJ,GAAW,KAAK,CAAxB;;;AAEF,SAASC,aAAT,CAAuBlG,GAAvB,EAA4B;EAC1BwF,eAAe,CAACxF,GAAD,CAAf;EACAkF,yBAAyB,CAAClF,GAAD,EAAMyF,WAAN,CAAzB;;;AAEFI,WAAW,CAAC/J,SAAZ,GAAwB;EACtBC,GAAG,CAACiE,GAAD,EAAM;IACPkG,aAAa,CAAClG,GAAD,CAAb;;QACMmG,GAAG,GAAGH,aAAa,CAAChG,GAAD,EAAM,KAAK+F,GAAX,CAAzB;;QACII,GAAG,IAAIA,GAAG,CAAC,CAAD,CAAH,KAAW,KAAKJ,GAA3B,EAAgC;aACvBI,GAAG,CAAC,CAAD,CAAV;;GALkB;;EAQtB9J,GAAG,CAAC2D,GAAD,EAAM;IACPkG,aAAa,CAAClG,GAAD,CAAb;WACO,CAAC,CAACgG,aAAa,CAAChG,GAAD,EAAM,KAAK+F,GAAX,CAAtB;GAVoB;;EAYtBtD,GAAG,CAACzC,GAAD,EAAMmG,GAAN,EAAW;IACZD,aAAa,CAAClG,GAAD,CAAb;;QACM2C,OAAO,GAAGqD,aAAa,CAAChG,GAAD,EAAM,KAAK+F,GAAX,CAA7B;;QACIpD,OAAO,IAAIA,OAAO,CAAC,CAAD,CAAP,KAAe,KAAKoD,GAAnC,EAAwC;MACtCpD,OAAO,CAAC,CAAD,CAAP,GAAawD,GAAb;KADF,MAEO;MACLnG,GAAG,CAACyF,WAAD,CAAH,CAAiB,KAAKM,GAAtB,IAA6B,CAAC,KAAKA,GAAN,EAAWI,GAAX,CAA7B;;;WAEK,IAAP;GApBoB;;EAsBtBvD,MAAM,CAAC5C,GAAD,EAAM;IACVkG,aAAa,CAAClG,GAAD,CAAb;;QACM2C,OAAO,GAAGqD,aAAa,CAAChG,GAAD,EAAM,KAAK+F,GAAX,CAA7B;;QACI,CAACpD,OAAL,EAAc,OAAO,KAAP;WACP3C,GAAG,CAACyF,WAAD,CAAH,CAAiB,KAAKM,GAAtB,CAAP;WACO,IAAP;;;CA3BJ;;ACjDA,SAASxB,aAAT,CAAqBT,EAArB,EAAyB;MACnBA,EAAE,IAAI,IAAV,EAAgB;MACZ,CAACrH,UAAU,CAACqH,EAAD,CAAf,EACE,MAAM,IAAInF,KAAJ,CAAU,WAAWjB,MAAM,CAACoG,EAAD,CAAjB,GAAwB,kBAAlC,CAAN;;OACGpH,CAAL,IAAUoH,EAAV,EAAc;SACPsC,KAAL,CAAW3D,GAAX,CAAe/F,CAAf,EAAkBA,CAAlB;;;;AAUJ,AAAe,SAAS2J,WAAT,CAAqBtC,QAArB,EAA+BuC,6BAA/B,EAA8D;MACvE,CAACA,6BAAD,IAAkCtF,QAAtC,EAAgD,OAAO,IAAIuF,OAAJ,CAAYxC,QAAZ,CAAP;;EAChDN,eAAe,CAAC,IAAD,EAAO4C,WAAP,CAAf;;OACKD,KAAL,GAAa,IAAII,WAAJ,CAAa,IAAb,EAAmBF,6BAAnB,CAAb;EACA/B,aAAW,CAAClF,IAAZ,CAAiB,IAAjB,EAAuB0E,QAAvB;;AAEF,IAAMzH,CAAC,GAAC,IAAI+J,WAAJ,EAAR;AACA/J,AACA+J,WAAW,CAACvK,SAAZ,GAAwB;EACtBwI,GAAG,CAAC5H,CAAD,EAAI;QACD,KAAK0J,KAAL,CAAW/J,GAAX,CAAeK,CAAf,CAAJ,EAAuB;;SAClB0J,KAAL,CAAW3D,GAAX,CAAe/F,CAAf,EAAkBA,CAAlB;;WACO,IAAP;GAJoB;;EAMtBL,GAAG,CAACK,CAAD,EAAI;WACE,KAAK0J,KAAL,CAAW/J,GAAX,CAAeK,CAAf,CAAP;GAPoB;;EAStBkG,MAAM,CAAClG,CAAD,EAAI;WACD,KAAK0J,KAAL,CAAWxD,MAAX,CAAkBlG,CAAlB,CAAP;;;CAVJ;;ACzBA,qBAAe,aAAaE,OAAb,GACXA,OAAO,CAAC4E,OADG,GAEX,SAASiF,cAAT,CAAwBnK,CAAxB,EAA2B;MACnB2C,IAAI,GAAGA,IAAI,CAAC3C,CAAD,CAAjB;MACIoK,IAAI,GAAGzH,IAAI,CAACa,MAAhB;MACM6G,GAAG,GAAGC,KAAK,CAACF,IAAD,CAAjB;;SACOA,IAAI,EAAX,EAAe;QACPG,CAAC,GAAG5H,IAAI,CAACyH,IAAD,CAAd;IACAC,GAAG,CAACD,IAAD,CAAH,GAAY,CAACG,CAAD,EAAIvK,CAAC,CAACuK,CAAD,CAAL,CAAZ;;;SAEKF,GAAP;CAVN;;ACAA,oBAAe,YAAY/J,OAAZ,GACXA,OAAO,CAAC6E,MADG,GAEX,SAASqF,aAAT,CAAuBxK,CAAvB,EAA0B;MAClB6C,GAAG,GAAG,EAAZ;;OACK,IAAMC,CAAX,IAAgBH,WAAI,CAAC3C,CAAD,CAApB;IAAyB6C,GAAG,CAACG,IAAJ,CAAShD,CAAC,CAAC8C,CAAD,CAAV;;;SAClBD,GAAP;CALN;;ACAA,yBAAe,iBAAiBvC,OAAjB,GACXA,OAAO,CAACmK,WADG,GAEX,SAASC,kBAAT,CAA4BxF,OAA5B,EAAqC;MAC7BmF,GAAG,GAAG,EAAZ;EACAnF,OAAO,CAACnE,OAAR,CAAgBX,CAAC,IAAKiK,GAAG,CAACjK,CAAC,CAAC,CAAD,CAAF,CAAH,GAAYA,CAAC,CAAC,CAAD,CAAnC;SACOiK,GAAP;CALN;;ACDA,gBAAgB,QAAQ/J,OAAR,GAAiBA,OAAO,CAAC0F,EAAzB,GAA8B,SAASA,EAAT,CAAYjB,CAAZ,EAAeC,CAAf,EAAkB;MAC1DD,CAAC,KAAKC,CAAV,EAAa;WACJD,CAAC,KAAK,CAAN,IAAW,IAAIA,CAAJ,KAAU,IAAIC,CAAhC;GADF,MAEO;WACED,CAAC,KAAKA,CAAN,IAAWC,CAAC,KAAKA,CAAxB;;CAJJ;;ACDe,SAAS2F,SAAT,CAAmB9B,GAAnB,EAAwB+B,KAAxB,EAA+B;SACrC,IAAIjJ,OAAJ,CAAYkJ,GAAG,IAAIhC,GAAG,CAACiC,gBAAJ,CAAqBF,KAArB,EAA4BC,GAA5B,EAAiC;IAAEE,IAAI,EAAE;GAAzC,CAAnB,CAAP;;;ACAa,SAASC,mBAAT,CAA6BC,MAA7B,EAAqC;EACnDjJ,kBAAkB,CAACI,MAAnB;;SACQ,IAAIT,OAAJ,CAAY,CAACG,OAAD,EAAUwD,CAAV,KAAgB;QAC3B4F,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACF,MAAD,CAAT,EAAmB;MAC9BG,IAAI,EAAE;KADK,CAAb;QAGMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;;IACAD,MAAM,CAACE,MAAP,GAAgBC,GAAG,IAAI;UACfC,OAAO,GAAGD,GAAG,CAAClI,MAAJ,CAAWoI,MAA3B;MACA5J,OAAO,CAAC2J,OAAO,CAACE,MAAR,CAAeF,OAAO,CAACG,OAAR,CAAgB,GAAhB,IAAuB,CAAtC,CAAD,CAAP;KAFF;;IAIAP,MAAM,CAACQ,aAAP,CAAqBX,IAArB;GATK,CAAP;;;ACDa,SAASY,aAAT,CAAuBC,OAAvB,EAAgC;EAC7C/J,kBAAkB,CAACI,MAAnB;;MACMzB,IAAI,GAAGqL,QAAQ,CAACC,KAAT,CAAelJ,IAAf,CAAoBQ,SAApB,EAA+B,CAA/B,CAAb;;MACI,WAAWwI,OAAf,EAAwB;WACfA,OAAO,CAACG,KAAR,CAAcC,KAAd,CAAoBJ,OAApB,EAA6BpL,IAA7B,CAAP;;;MAEIC,IAAI,GAAGF,gBAAgB,CAACC,IAAD,CAA7B;;EACAoL,OAAO,CAACK,UAAR,CAAmBC,YAAnB,CAAgCzL,IAAhC,EAAsCmL,OAAO,CAACO,WAA9C;;;ACPa,SAASC,cAAT,CAAwBR,OAAxB,EAAiC;EAChD/J,kBAAkB,CAACI,MAAnB;;MACQzB,IAAI,GAAGqL,QAAQ,CAACC,KAAT,CAAelJ,IAAf,CAAoBQ,SAApB,EAA+B,CAA/B,CAAb;;MACI,YAAYwI,OAAhB,EAAyB;IACvBA,OAAO,CAACS,MAAR,CAAeL,KAAf,CAAqBJ,OAArB,EAA8BpL,IAA9B;;;MAEIC,IAAI,GAAGF,gBAAgB,CAACC,IAAD,CAA7B;;EACAoL,OAAO,CAAC9K,WAAR,CAAoBL,IAApB;;;ACPa,SAAS6L,eAAT,CAAyBV,OAAzB,EAAkC;EAC/C/J,kBAAkB,CAACI,MAAnB;;MACMzB,IAAI,GAAGqL,QAAQ,CAACC,KAAT,CAAelJ,IAAf,CAAoBQ,SAApB,EAA+B,CAA/B,CAAb;;MACI,aAAawI,OAAjB,EAA0B;WACjBA,OAAO,CAACW,OAAR,CAAgBP,KAAhB,CAAsBJ,OAAtB,EAA+BpL,IAA/B,CAAP;;;MAEIC,IAAI,GAAGF,gBAAgB,CAACC,IAAD,CAA7B;;EACAoL,OAAO,CAACM,YAAR,CAAqBzL,IAArB,EAA2BmL,OAAO,CAACY,UAAnC;;;ACTa,SAASC,KAAT,CAAeC,EAAf,EAAmBC,GAAnB,EAAuBjL,IAAvB,EAA6B;EAC3CiL,GAAG,GAACA,GAAG,IAAE,CAAT;SACQ,kBAAiB;QAClBC,KAAK,GAAG,CAAZ;;WACOA,KAAK,GAAGD,GAAf,EAAoB;UACd;eACK,MAAMD,EAAE,CAACV,KAAH,CAAStK,IAAT,EAAc0B,SAAd,CAAb;OADF,CAEE,OAAOyJ,CAAP,EAAU;QACVD,KAAK;;;;UAGH,IAAI1K,KAAJ,CAAU,eAAewK,EAAE,CAACI,IAAH,IAAW,EAA1B,IAAgC,UAAhC,GAA6CH,GAA7C,GAAmD,QAA7D,CAAN;GATF;;;ACAF1N,eAAe;AACf,AAAe,SAAS8N,SAAT,CAAmBlN,CAAnB,EAAsB;MAC/BX,UAAU,CAAC8N,eAAf,EAAgC;WACvB,IAAIA,eAAJ,CAAoBnN,CAApB,EAAuBqJ,QAAvB,EAAP;GADF,MAEO;gBACKR,GAAG,CACVlG,IADO,CACF3C,CADE,EAEPqF,GAFO,CAEHpF,CAAC,IAAOmN,kBAAkB,CAACnN,CAAD,CAAzB,SAAgCmN,kBAAkB,CAACpN,CAAC,CAACC,CAAD,CAAF,CAFhD,EAGPkD,IAHO,CAGF,GAHE,CAAV;;;;ACJW,SAASkK,OAAT,CAAiBC,GAAjB,EAAsB;EACnCtL,kBAAkB,CAACI,MAAnB;;MACMmL,IAAI,GAAGnK,aAAM,CAACvC,QAAQ,CAACY,aAAT,CAAuB,MAAvB,CAAD,EAAiC;IAClD+L,GAAG,EAAE,YAD6C;IAElDC,IAAI,EAAEH;GAFW,CAAnB;SAIO,IAAI3L,OAAJ,CAAY,CAACkJ,GAAD,EAAM6C,GAAN,KAAc;IAC/BH,IAAI,CAACzC,gBAAL,CAAsB,MAAtB,EAA8B,MAAMD,GAAG,EAAvC;IACA0C,IAAI,CAACzC,gBAAL,CAAsB,OAAtB,EAA+B,MAAM4C,GAAG,EAAxC;IACAlB,cAAM,CAAC3L,QAAQ,CAAC8M,IAAV,EAAgBJ,IAAhB,CAAN;GAHK,CAAP;;;ACkBF,IAAM1E,KAAG,GAAG;EACVmC,mBADU;EAEV1I,mBAFU;EAGVW,cAHU;EAIV2K,SAJU;EAKVjK,cALU;EAMVuJ,SANU;EAOVtK,WAPU;EAQV4H,aARU;EASVL,cATU;EAUVO,kBAVU;EAWVrH,aAXU;EAYVkJ,cAZU;EAaVE,eAbU;EAcVX,aAdU;EAeVuB,OAfU;EAgBVT,KAhBU;EAiBVjC,SAjBU;EAkBVkD,SAAS,EAAE3H,OAlBD;EAmBV4H,SAAS,EAAE/F,OAnBD;EAoBVgG,aAAa,EAAExE,WApBL;EAqBVyE,aAAa,EAAEjE;CArBjB;;;;"}